<!DOCTYPE html>
<html data-bs-theme="light" lang="id">

<head>
    <meta charset="utf-8">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Profil Toko - by walletku.biz.id</title>
    <link rel="canonical" href="https://walletku.biz.id/dashboard/tokoku/toko.html">
    <meta property="og:url" content="https://walletku.biz.id/dashboard/tokoku/toko.html">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="Mulai mengelola pemasukan dan pengeluaran-mu dengan mudah.">
    <meta name="twitter:title" content="WalletKu - Mulai atur keuangan mu | beta test">
    <meta name="twitter:image" content="https://walletku.biz.id/assets/img/SEO/og1@2x.webp">
    <meta name="description" content="Mulai mengelola pemasukan dan pengeluaran-mu dengan mudah. dengan fitur backup export dan import">
    <meta property="og:image" content="https://walletku.biz.id/assets/img/SEO/og1@2x.webp">
    <link rel="icon" type="image/png" sizes="484x484" href="../../assets/img/SEO/icon-wallet.webp">
    <link rel="icon" type="image/png" sizes="484x484" href="../../assets/img/SEO/icon-wallet.webp" media="(prefers-color-scheme: dark)">
    <link rel="icon" type="image/png" sizes="484x484" href="../../assets/img/SEO/icon-wallet.webp">
    <link rel="icon" type="image/png" sizes="484x484" href="../../assets/img/SEO/icon-wallet.webp" media="(prefers-color-scheme: dark)">
    <link rel="icon" type="image/png" sizes="484x484" href="../../assets/img/SEO/icon-wallet.webp">
    <link rel="icon" type="image/png" sizes="484x484" href="../../assets/img/SEO/icon-wallet.webp">
    <link rel="icon" type="image/png" sizes="484x484" href="../../assets/img/SEO/icon-wallet.webp">
    <link rel="stylesheet" href="../../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="../../assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="../../assets/css/animate.min.css">
    <link rel="stylesheet" href="../../assets/css/dashboard-app/style.css">
    <link rel="stylesheet" href="../../assets/css/dashboard-app/Pricing-Duo-badges.css">
    <link rel="stylesheet" href="../../assets/css/dashboard-app/Pricing-Duo-icons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>
</head>

<body>
    <div class="offcanvas offcanvas-start bg-body" tabindex="-1" id="offcanvas-menu" style="border-top-right-radius: 16px;border-bottom-right-radius: 16px;box-shadow: 40px 0px 20px 0px rgba(0,0,0,0.11);width: 290px;height: auto;">
        <div class="offcanvas-header justify-content-between mb-4 topbar" style="padding-left: 22px;"><a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" href="dashboard.html" style="height: auto;">
                <div class="bounce animated infinite sidebar-brand-icon rotate-n-15"><i class="fas fa-store text-primary" style="font-size: 23px;"></i></div>
                <div class="sidebar-brand-text" style="margin-left: 10px;"><span class="text-primary" style="font-family: Nunito, sans-serif;font-weight: bold;font-size: 20px;">TokoKu</span></div>
            </a><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" type="button" aria-label="Close" data-bs-dismiss="offcanvas" style="font-size: 34px;color: rgb(78,115,223);box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-width: 2px;border-style: solid;border-radius: 16px;">
                <path d="M16.3394 9.32245C16.7434 8.94589 16.7657 8.31312 16.3891 7.90911C16.0126 7.50509 15.3798 7.48283 14.9758 7.85938L12.0497 10.5866L9.32245 7.66048C8.94589 7.25647 8.31312 7.23421 7.90911 7.61076C7.50509 7.98731 7.48283 8.62008 7.85938 9.0241L10.5866 11.9502L7.66048 14.6775C7.25647 15.054 7.23421 15.6868 7.61076 16.0908C7.98731 16.4948 8.62008 16.5171 9.0241 16.1405L11.9502 13.4133L14.6775 16.3394C15.054 16.7434 15.6868 16.7657 16.0908 16.3891C16.4948 16.0126 16.5171 15.3798 16.1405 14.9758L13.4133 12.0497L16.3394 9.32245Z" fill="currentColor"></path>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" fill="currentColor"></path>
            </svg></div>
        <div class="offcanvas-body d-flex flex-column justify-content-between">
            <div>
                <ul class="nav flex-column mb-auto">
                    <li class="nav-item" data-bss-hover-animate="pulse" style="padding: 3px;background: #4e73df;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;border-width: 2px;border-style: solid;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);"><a class="nav-link" aria-current="page" href="/dashboard/tokoku" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" target="_parent"><i class="fas fa-store me-2"></i> TokoKu</a></li>
                    <li class="nav-item" data-bss-hover-animate="pulse" style="padding: 3px;background: #4e73df;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;border-width: 2px;border-style: solid;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);"><a class="nav-link" aria-current="page" href="transaksi.html" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" target="_parent"><i class="fas fa-money-bill-wave me-2"></i> Transaksi</a></li>
                    <li class="nav-item" data-bss-hover-animate="pulse" style="padding: 3px;background: #4e73df;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;border-width: 2px;border-style: solid;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);"><a class="nav-link" aria-current="page" href="nota.html" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" target="_parent"><i class="fas fa-file-invoice-dollar me-2"></i> Nota</a></li>
                    <li class="nav-item" data-bss-hover-animate="pulse" style="padding: 3px;background: #4e73df;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;border-width: 2px;border-style: solid;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);"><a class="nav-link" aria-current="page" href="item.html" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" target="_parent"><i class="fas fa-box me-2"></i> Produk</a></li>
                    <li class="nav-item" data-bss-hover-animate="pulse" style="padding: 3px;background: #4e73df;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;border-width: 2px;border-style: solid;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);"><a class="nav-link" aria-current="page" href="laporan.html" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" target="_parent"><i class="fas fa-chart-bar me-2"></i> Laporan</a></li>
                    <li class="nav-item" data-bss-hover-animate="pulse" style="padding: 3px;background: #4e73df;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;border-width: 2px;border-style: solid;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);"><a class="nav-link" aria-current="page" href="toko.html" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" target="_parent"><i class="fas fa-store me-2"></i> Profile TokoKu</a></li>
                    <li class="nav-item pulse animated infinite" style="padding: 3px;background: #4e73df;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;border-width: 2px;border-style: solid;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);"><a class="nav-link" aria-current="page" href="../index.html" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" target="_parent" rel="prev"><i class="fas fa-wallet me-2"></i> WalletKu</a></li>
                </ul><h1>Backup & Restore Data Kasir</h1>

    <div id="auth-status">Memuat status autentikasi...</div>
    <button id="authorize_button" style="display: none;">Login & Authorize Google Drive</button>
    <button id="signout_button" style="display: none;">Logout Google</button>

    <hr>

    <h2>Opsi Google Drive</h2>
    <button id="btnBackupGoogleDrive" style="display: none;">Backup ke Google Drive</button>
    <button id="btnRestoreGoogleDrive" style="display: none;">Restore dari Google Drive</button>

    <hr>

    <h2>Opsi Lokal</h2>
    <button id="btnBackup">Backup ke File Lokal</button>
    <input type="file" id="fileImport" style="display: none;" accept=".json">
    <button id="btnImport">Import dari File Lokal</button>
<script>
        // --- Konfigurasi Kredensial dan API ---
        const CLIENT_ID = '428814807215-d0fd7qsjrqigukppun4nlvptoh1pm6k4.apps.googleusercontent.com'; // Client ID Anda
        // JANGAN PERNAH TARUH CLIENT SECRET DI SINI!
        const DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];
        const SCOPES = 'https://www.googleapis.com/auth/drive.appfolder'; // Menggunakan AppDataFolder
        const BACKUP_FILE_NAME = 'aplikasi_kasir_backup.json';

        // --- Variabel Status & Elemen DOM ---
        let tokenClient;
        let gapiInited = false;
        let gisInited = false;

        const authorizeButton = document.getElementById('authorize_button');
        const signoutButton = document.getElementById('signout_button');
        const backupButtonGDrive = document.getElementById('btnBackupGoogleDrive');
        const restoreButtonGDrive = document.getElementById('btnRestoreGoogleDrive');
        const authStatusDiv = document.getElementById('auth-status');
        const backupButtonLocal = document.getElementById('btnBackup');
        const importButtonLocal = document.getElementById('btnImport');
        const fileImportInput = document.getElementById('fileImport');


        // --- Fungsi Inisialisasi GAPI & GIS ---

        function gapiLoaded() {
            gapi.load('client', initializeGapiClient);
        }

        function gisLoaded() {
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID,
                scope: SCOPES,
                callback: tokenResponse => {
                    if (tokenResponse && tokenResponse.access_token) {
                        console.log("Otorisasi berhasil, token diterima.");
                        // GAPI mungkin belum siap saat token pertama kali diterima,
                        // pastikan gapi.client sudah diinisialisasi sebelum menggunakannya.
                        if (gapiInited) {
                            loadDriveApi(); // Langsung load Drive API jika GAPI sudah siap
                        } else {
                           // Jika GAPI belum siap, tunggu GAPI init baru load Drive API
                           // Status akan diupdate di initializeGapiClient nanti
                           authStatusDiv.innerText = 'Menunggu Google API Client siap...';
                        }
                        updateUIBasedOnAuthState(true); // Update UI sementara
                    } else {
                        console.error("Gagal mendapatkan token akses.", tokenResponse);
                        alert('Gagal mendapatkan izin Google Drive.');
                        updateUIBasedOnAuthState(false);
                    }
                },
                error_callback: (error) => {
                    console.error('GIS Error:', error);
                    // Cek jika error karena popup diblokir
                    if (error && error.type === 'popup_closed') {
                        alert('Popup Google Sign-In diblokir atau ditutup. Mohon izinkan popup untuk situs ini dan coba lagi.');
                    } else {
                        alert('Terjadi kesalahan saat otorisasi Google.');
                    }
                    updateUIBasedOnAuthState(false);
                }
            });
            gisInited = true;
            maybeEnableAuthButton();
        }

        async function initializeGapiClient() {
            try {
                await gapi.client.init({
                    // apiKey: API_KEY, // Tidak perlu apiKey jika sudah pakai OAuth
                    discoveryDocs: DISCOVERY_DOCS,
                });
                gapiInited = true;
                console.log("GAPI Client Initialized");
                // Jika token sudah ada (misalnya dari callback GIS yang datang duluan)
                // dan Drive API belum diload, load sekarang.
                if (gapi.client.getToken() && !gapi.client.drive) {
                    await loadDriveApi();
                }
                maybeEnableAuthButton();
                updateUIBasedOnAuthState(!!gapi.client.getToken()); // Update UI berdasarkan token yg mungkin sudah ada

            } catch (error) {
                console.error('Error initializing GAPI client:', error);
                authStatusDiv.innerText = 'Gagal memuat Google API Client.';
                updateUIBasedOnAuthState(false);
            }
        }

        function maybeEnableAuthButton() {
            // Tombol login hanya muncul jika GAPI dan GIS siap DAN user belum login/authorize
            if (gapiInited && gisInited && !gapi.client.getToken()) {
                 authorizeButton.style.display = 'block';
                 authStatusDiv.innerText = 'Siap untuk Login/Authorize';
            }
        }

        // --- Fungsi Autentikasi & Otorisasi ---

        authorizeButton.onclick = function handleAuthClick() {
             authStatusDiv.innerText = 'Meminta izin Google...';
            if (!tokenClient) {
                 console.error("Token client belum siap.");
                 alert("Komponen Google Sign-In belum siap, silakan coba lagi sesaat.");
                 return;
            }

            if (gapi.client.getToken() === null) {
                // Minta token baru, tampilkan prompt pemilihan akun & izin
                tokenClient.requestAccessToken({ prompt: 'consent' });
            } else {
                // Token sudah ada, mungkin hanya perlu refresh (jika diperlukan)
                tokenClient.requestAccessToken({ prompt: '' }); // Prompt kosong akan coba refresh tanpa interaksi
            }
        };

        signoutButton.onclick = function handleSignoutClick() {
            const token = gapi.client.getToken();
            if (token !== null) {
                google.accounts.oauth2.revoke(token.access_token, () => {
                    gapi.client.setToken(null); // Hapus token dari gapi client
                    console.log("User logged out.");
                    // Reset status GAPI drive API agar perlu diload lagi jika login kembali
                    if (gapi.client.drive) {
                         gapi.client.drive = undefined; // Atau cara lain untuk menandai belum siap
                    }
                    updateUIBasedOnAuthState(false);
                    authStatusDiv.innerText = 'Anda telah logout.';
                });
            } else {
                updateUIBasedOnAuthState(false); // Jika tidak ada token, pastikan UI sesuai
            }
        };

        async function loadDriveApi() {
            // Cek lagi apakah GAPI client sudah siap
            if (!gapi.client) {
                console.error("GAPI client belum diinisialisasi saat mencoba load Drive API.");
                return;
            }
            // Cek apakah Drive API sudah dimuat sebelumnya
             if (gapi.client.drive) {
                console.log("Drive API sudah dimuat sebelumnya.");
                updateUIBasedOnAuthState(true); // Pastikan UI sudah benar
                return;
            }

            try {
                console.log("Memuat Drive API v3...");
                await gapi.client.load('drive', 'v3');
                console.log("Drive API v3 loaded successfully.");
                updateUIBasedOnAuthState(true); // Update UI setelah Drive API siap
            } catch(error) {
                 console.error("Error loading Drive API: ", error);
                 alert('Gagal memuat Google Drive API. Fitur backup/restore mungkin tidak berfungsi.');
                 // Jika gagal load API, anggap user tidak terotorisasi penuh
                 updateUIBasedOnAuthState(!!gapi.client.getToken()); // Update UI hanya berdasarkan token, bukan API
                 authStatusDiv.innerText = 'Gagal memuat Drive API. Coba login ulang.';

            }
        }

         function updateUIBasedOnAuthState(isAuthorized) {
            const driveApiReady = isAuthorized && gapi.client && gapi.client.drive;

            if (driveApiReady) {
                authStatusDiv.innerText = 'Login Berhasil & Drive API Siap.';
                authorizeButton.style.display = 'none';
                signoutButton.style.display = 'block';
                backupButtonGDrive.style.display = 'inline-block'; // 'inline-block' agar sejajar
                restoreButtonGDrive.style.display = 'inline-block';
            } else if (isAuthorized && gapiInited) {
                 // User sudah login tapi Drive API belum siap / gagal load
                 authStatusDiv.innerText = 'Login berhasil, memuat Drive API...';
                 authorizeButton.style.display = 'none';
                 signoutButton.style.display = 'block'; // Tombol logout tetap ada
                 backupButtonGDrive.style.display = 'none';
                 restoreButtonGDrive.style.display = 'none';
            }
             else {
                // Tidak login atau belum init penuh
                authStatusDiv.innerText = (gapiInited && gisInited) ? 'Harap Login dengan Google' : 'Memuat komponen Google...';
                authorizeButton.style.display = (gapiInited && gisInited) ? 'inline-block' : 'none'; // Tampilkan hanya jika init selesai
                signoutButton.style.display = 'none';
                backupButtonGDrive.style.display = 'none';
                restoreButtonGDrive.style.display = 'none';
            }
        }


        // --- Fungsi Inti Backup & Restore Google Drive ---

        async function findBackupFileId() {
             if (!gapi.client || !gapi.client.drive) {
                alert("Google Drive API belum siap. Silakan coba lagi.");
                return null;
            }
            try {
                const response = await gapi.client.drive.files.list({
                    spaces: 'appDataFolder',
                    fields: 'files(id, name)',
                    q: `name='${BACKUP_FILE_NAME}' and trashed=false`
                });

                if (response.result.files && response.result.files.length > 0) {
                    console.log("File backup ditemukan:", response.result.files[0]);
                    return response.result.files[0].id;
                } else {
                    console.log("File backup tidak ditemukan di AppDataFolder.");
                    return null;
                }
            } catch (error) {
                console.error("Error saat mencari file backup:", error);
                alert(`Gagal mencari file backup di Google Drive: ${error.result?.error?.message || error.message}`);
                return null;
            }
        }

        backupButtonGDrive.onclick = async function backupToGoogleDrive() {
            if (!gapi.client || !gapi.client.drive) {
                 alert("Google Drive API belum siap. Silakan login ulang.");
                 return;
            }

            backupButtonGDrive.disabled = true;
            backupButtonGDrive.innerText = 'Membackup...';
            authStatusDiv.innerText = 'Sedang membackup data ke Google Drive...';

            const dataToBackup = {
                produk: JSON.parse(localStorage.getItem('produk') || '[]'),
                nota: JSON.parse(localStorage.getItem('nota') || '[]'),
                pengaturanToko: JSON.parse(localStorage.getItem('pengaturanToko') || '{}'),
                backupTimestamp: new Date().toISOString()
            };
            const jsonData = JSON.stringify(dataToBackup);
            const blobData = new Blob([jsonData], { type: 'application/json' });

            const fileId = await findBackupFileId();

            const metadata = {
                name: BACKUP_FILE_NAME,
                mimeType: 'application/json',
            };

            const form = new FormData();

            try {
                let requestPath;
                let requestMethod;

                if (fileId) {
                    console.log(`Mengupdate file yang ada dengan ID: ${fileId}`);
                    requestPath = `/upload/drive/v3/files/${fileId}`;
                    requestMethod = 'PATCH';
                    // Untuk PATCH, metadata dikirim dalam body juga, tapi hanya field yg diupdate
                    form.append('metadata', new Blob([JSON.stringify({})], { type: 'application/json' })); // Kosong cukup jika hanya konten berubah
                    form.append('file', blobData);
                } else {
                    console.log("Membuat file backup baru di AppDataFolder.");
                    requestPath = '/upload/drive/v3/files';
                    requestMethod = 'POST';
                    metadata.parents = ['appDataFolder']; // Pastikan disimpan di AppDataFolder
                    form.append('metadata', new Blob([JSON.stringify(metadata)], { type: 'application/json' }));
                    form.append('file', blobData);
                }

                const response = await gapi.client.request({
                    path: requestPath,
                    method: requestMethod,
                    params: { uploadType: 'multipart' },
                    body: form
                });

                console.log("Respons upload/update dari Google Drive:", response);
                if (response.status === 200) {
                     alert('Backup data ke Google Drive (AppDataFolder) berhasil!');
                     authStatusDiv.innerText = 'Backup berhasil!';
                } else {
                     alert(`Backup gagal dengan status: ${response.status}. Detail: ${response.body}`);
                     authStatusDiv.innerText = 'Backup gagal.';
                }

            } catch (error) {
                console.error("Error saat backup ke Google Drive:", error);
                alert(`Terjadi kesalahan saat backup: ${error.result?.error?.message || error.message || error}`);
                 authStatusDiv.innerText = 'Error saat backup.';
            } finally {
                backupButtonGDrive.disabled = false;
                backupButtonGDrive.innerText = 'Backup ke Google Drive';
                 // Kembalikan status normal jika tidak ada error lain
                if (authStatusDiv.innerText.startsWith('Sedang') || authStatusDiv.innerText.startsWith('Error') || authStatusDiv.innerText.startsWith('Backup gagal')) {
                     updateUIBasedOnAuthState(true); // Set status kembali ke normal 'Login Berhasil'
                }
            }
        };

        restoreButtonGDrive.onclick = async function restoreFromGoogleDrive() {
            if (!gapi.client || !gapi.client.drive) {
                 alert("Google Drive API belum siap. Silakan login ulang.");
                 return;
            }
            if (!confirm("PERINGATAN: Ini akan menimpa data kasir lokal Anda saat ini dengan data dari Google Drive. Apakah Anda yakin ingin melanjutkan?")) {
                return;
            }

            restoreButtonGDrive.disabled = true;
            restoreButtonGDrive.innerText = 'Mencari file...';
            authStatusDiv.innerText = 'Mencari file backup di Google Drive...';

            try {
                const fileId = await findBackupFileId();

                if (!fileId) {
                    alert("File backup tidak ditemukan di Google Drive Anda (AppDataFolder).");
                    authStatusDiv.innerText = 'File backup tidak ditemukan.';
                    restoreButtonGDrive.disabled = false;
                    restoreButtonGDrive.innerText = 'Restore dari Google Drive';
                    return;
                }

                console.log(`Mendownload file dengan ID: ${fileId}`);
                restoreButtonGDrive.innerText = 'Mendownload...';
                authStatusDiv.innerText = 'Sedang mendownload data...';


                const response = await gapi.client.drive.files.get({
                    fileId: fileId,
                    alt: 'media'
                });

                console.log("Respons download:", response);
                const fileContent = response.body; // Ini adalah string JSON

                 restoreButtonGDrive.innerText = 'Memproses...';
                 authStatusDiv.innerText = 'Memproses data...';

                try {
                    const data = JSON.parse(fileContent);

                    if (data && typeof data.produk !== 'undefined' && typeof data.nota !== 'undefined' && typeof data.pengaturanToko !== 'undefined') {
                        localStorage.setItem('produk', JSON.stringify(data.produk));
                        localStorage.setItem('nota', JSON.stringify(data.nota));
                        localStorage.setItem('pengaturanToko', JSON.stringify(data.pengaturanToko));

                        alert('Data berhasil direstore dari Google Drive! Halaman akan dimuat ulang untuk menerapkan perubahan.');
                        authStatusDiv.innerText = 'Restore berhasil! Memuat ulang...';
                        // Panggil fungsi load data Anda ATAU refresh halaman
                        // Contoh: muatNota();
                        location.reload(); // Cara termudah

                    } else {
                        alert('Format data dalam file backup Google Drive tidak valid.');
                        authStatusDiv.innerText = 'Format file backup tidak valid.';
                    }
                } catch (parseError) {
                    console.error("Error parsing JSON dari file backup:", parseError);
                    alert('Gagal membaca data dari file backup Google Drive. File mungkin rusak atau bukan JSON.');
                    authStatusDiv.innerText = 'Gagal membaca file backup.';
                }

            } catch (error) {
                console.error("Error saat restore dari Google Drive:", error);
                 alert(`Terjadi kesalahan saat restore: ${error.result?.error?.message || error.message || error}`);
                 authStatusDiv.innerText = 'Error saat restore.';
            } finally {
                // Pastikan tombol aktif kembali jika tidak terjadi reload
                if (!authStatusDiv.innerText.includes('Memuat ulang')) {
                    restoreButtonGDrive.disabled = false;
                    restoreButtonGDrive.innerText = 'Restore dari Google Drive';
                     updateUIBasedOnAuthState(true); // Kembalikan status normal
                }
            }
        };


        // --- Fungsi Backup & Import Lokal (Kode Anda Sebelumnya) ---

        backupButtonLocal.addEventListener('click', () => {
            try {
                const data = {
                    produk: JSON.parse(localStorage.getItem('produk') || '[]'),
                    nota: JSON.parse(localStorage.getItem('nota') || '[]'),
                    pengaturanToko: JSON.parse(localStorage.getItem('pengaturanToko') || '{}')
                };
                // Pretty print JSON agar mudah dibaca jika dibuka manual
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `backup_lokal_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                console.log("Backup lokal berhasil dibuat.");
            } catch(error) {
                console.error("Gagal membuat backup lokal:", error);
                alert("Gagal membuat file backup lokal.");
            }
        });

        importButtonLocal.addEventListener('click', () => {
            fileImportInput.click();
        });

        fileImportInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    if (data && typeof data.produk !== 'undefined' && typeof data.nota !== 'undefined' && typeof data.pengaturanToko !== 'undefined') {
                        if (confirm("PERINGATAN: Ini akan menimpa data kasir lokal Anda saat ini dengan data dari file. Apakah Anda yakin ingin melanjutkan?")) {
                            localStorage.setItem('produk', JSON.stringify(data.produk));
                            localStorage.setItem('nota', JSON.stringify(data.nota));
                            localStorage.setItem('pengaturanToko', JSON.stringify(data.pengaturanToko));
                            alert('Data lokal berhasil diimpor dari file! Halaman akan dimuat ulang.');
                            // Panggil fungsi muat ulang data UI Anda atau refresh
                            // Contoh: muatNota();
                            location.reload();
                        }
                    } else {
                         alert('Format file JSON tidak valid untuk import.');
                    }
                } catch (error) {
                    console.error("Error parsing file import lokal:", error);
                    alert('Gagal membaca file. Pastikan file adalah JSON backup yang benar dan tidak rusak.');
                } finally {
                    // Reset input file agar bisa memilih file yang sama lagi
                    e.target.value = null;
                }
            };
             reader.onerror = (error) => {
                console.error("FileReader error:", error);
                alert("Gagal membaca file yang dipilih.");
             };
            reader.readAsText(file);
        });

        // --- Inisialisasi Saat Halaman Dimuat ---
        window.onload = () => {
            console.log("Halaman dimuat. Memulai inisialisasi Google API...");
            // Panggil loader GAPI dan GIS
             if (typeof gapi !== 'undefined') {
                gapiLoaded();
             } else {
                console.error("GAPI script not loaded yet or blocked.");
                authStatusDiv.innerText = 'Error: GAPI script gagal dimuat.';
             }

             if (typeof google !== 'undefined' && google.accounts) {
                gisLoaded();
             } else {
                console.error("GIS script not loaded yet or blocked.");
                authStatusDiv.innerText = 'Error: GIS script gagal dimuat.';
             }
        };

    </script>
</body>
</html>
            </div>
            <div class="d-flex flex-column" style="width: 100%;"><input class="d-none d-flex" type="file" id="fileImport" style="font-family: Nunito, sans-serif;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);width: auto;border-radius: 16px;"></div>
            <div>
                <ul class="nav d-flex justify-content-between">
                    <li class="nav-item" data-bss-hover-animate="pulse" style="padding: 3px;background: #650000;color: var(--primary-color);font-size: 16px;margin-bottom: 23px;border-radius: 16px;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border: 2px solid rgb(171,5,5) ;"><a class="nav-link" aria-current="page" href="../../index.html" style="font-family: Nunito, sans-serif;color: rgb(255,255,255);" onclick="localStorage.removeItem(&#39;userData&#39;)" rel="prev"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-logout-2 me-2">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M10 8v-2a2 2 0 0 1 2 -2h7a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-2"></path>
                                <path d="M15 12h-12l3 -3"></path>
                                <path d="M6 15l-3 -3"></path>
                            </svg> Logout</a></li>
                </ul>
            </div>
            <div>
                <hr>
            </div><span><strong>Beta</strong>&nbsp;<span>version 1.9.0.1</span></span>
        </div>
    </div>
    <div id="wrapper" style="padding-top: 86px;">
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
                <nav class="navbar navbar-expand fixed-top d-flex topbar" style="background: rgba(255,255,255,0.49);backdrop-filter: opacity(1) blur(6px);-webkit-backdrop-filter: opacity(1) blur(6px);margin-bottom: 0px;margin-top: 5px;margin-right: 5px;margin-left: 5px;border-radius: 16px;box-shadow: 0px 3px 20px rgba(177,177,177,0.84);border: 3px solid rgba(255,255,255,0.29);">
                    <div class="container"><button class="btn btn-link rounded-circle me-3" id="sidebarToggleTop" type="button" data-bs-target="#offcanvas-menu" data-bs-toggle="offcanvas" style="color: rgb(255,255,255);background: #4e73df;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-width: 2px;border-style: solid;border-radius: 16px;"><i class="fas fa-bars"></i></button>
                        <ul class="navbar-nav flex-nowrap ms-auto">
                            <li class="nav-item dropdown no-arrow mx-1"><a class="nav-link" href="berlangganan.html"><img class="pulse animated infinite" style="width: auto;height: 31px;" src="../../assets/img/diamond.gif"></a></li>
                            <li class="nav-item dropdown no-arrow mx-1">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="badge bg-danger badge-counter" style="transform: translateX(0px) translateY(-11px) translateZ(0px);">2</span><span class="badge bg-danger badge-counter premium2" style="transform: translateX(0px) translateY(-11px) translateZ(0px);">3</span><i class="fas fa-bell fa-fw" style="color: rgb(67,97,238);font-size: 21px;"></i></a>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in" style="border-radius: 16px;box-shadow: 0px 4px 20px 3px rgba(0,0,0,0.16);">
                                        <h6 class="dropdown-header" style="font-family: Nunito, sans-serif;font-size: 16px;">Pemberitahuan</h6><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="d-flex">
                                                <div><span class="small" style="color: rgb(88,88,94);">Bot</span>
                                                    <p style="color: rgb(67,68,74);">Laporkan keuangan mu dari pemasukan dan pengeluaran dengan mudah!</p>
                                                </div>
                                            </div>
                                        </a><a class="dropdown-item align-items-center premium2" href="#">
                                            <div class="d-flex">
                                                <div><span class="small" style="color: rgb(88,88,94);">Bot</span>
                                                    <p style="color: rgb(67,68,74);">Anda belum berlangganan. silahkan berlangganan untuk akses fitur premium</p>
                                                </div>
                                            </div>
                                        </a><a class="dropdown-item align-items-center" href="#">
                                            <div class="d-flex">
                                                <div><span class="small" style="color: rgb(88,88,94);">Bot</span>
                                                    <p style="color: rgb(67,68,74);">Apa yang baru? di Beta version <strong>1.9.0.1 </strong>anda dapat menyimpan dan mengirimkan dana antar dompet satu ke dompet lainnya. ini memerlukan akses premium jika ingin menggunakan fiitur tersebut.</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li class="nav-item dropdown no-arrow mx-1">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="badge bg-danger badge-counter" style="transform: translateX(0px) translateY(-11px) translateZ(0px);">2</span><i class="fas fa-file-import fa-fw" style="color: rgb(67,97,238);font-size: 21px;"></i></a>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in" style="border-radius: 16px;box-shadow: 0px 4px 20px 3px rgba(0,0,0,0.16);">
                                        <h6 class="dropdown-header" style="font-family: Nunito, sans-serif;font-size: 16px;">Backup data kamu</h6><a class="dropdown-item d-flex align-items-center premium" id="btnImport" href="#" data-bs-target="#importModal" data-bs-toggle="modal" style="font-family: Nunito, sans-serif;">
                                            <div class="dropdown-list-image me-3"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-down-left-circle-fill" style="width: 40px;height: 40px;color: #3b9c00;">
                                                    <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-5.904-2.803a.5.5 0 1 1 .707.707L6.707 10h2.768a.5.5 0 0 1 0 1H5.5a.5.5 0 0 1-.5-.5V6.525a.5.5 0 0 1 1 0v2.768l4.096-4.096z"></path>
                                                </svg></div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span style="font-family: Nunito, sans-serif;color: #3b9c00;">Import Data</span></div>
                                                <p class="small text-gray-500 mb-0" style="font-family: Nunito, sans-serif;color: #3b9c00;">Format.Json</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center premium" id="btnBackup" href="#" style="font-family: Nunito, sans-serif;">
                                            <div class="dropdown-list-image me-3"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="width: 40px;height: 40px;color: #cf4545;">
                                                    <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                                </svg></div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span style="font-family: Nunito, sans-serif;color: #cf4545;">Export Data</span></div>
                                                <p class="small text-gray-500 mb-0" style="font-family: Nunito, sans-serif;color: #cf4545;">Format.Json</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="shadow dropdown-list dropdown-menu dropdown-menu-end" aria-labelledby="alertsDropdown"></div>
                            </li>
                            <div class="d-none d-sm-block topbar-divider"></div>
                            <li class="nav-item dropdown no-arrow">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="d-none d-lg-inline me-2" style="font-family: Nunito, sans-serif;color: rgb(0,0,0);font-weight: bold;"><span style="font-weight: normal !important;">Halo!&nbsp;</span><span class="d-none d-lg-inline username" style="font-family: Nunito, sans-serif;margin-right: 0px;">User</span></span><img class="border rounded-circle img-profile" src="../../assets/img/icon/image2.jpeg"></a>
                                    <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in" style="border-radius: 16px;border: 2px solid rgb(225,225,230) ;"><a class="dropdown-item" href="#" style="padding-top: 8px;padding-bottom: 8px;color: rgb(40,40,40);font-family: Nunito, sans-serif;font-weight: bold;" data-bs-target="#profile-user" data-bs-toggle="modal"><i class="fas fa-user fa-sm fa-fw me-2" style="color: rgb(40,40,81);"></i>&nbsp;Profile</a>
                                        <div class="dropdown-divider"></div><a class="dropdown-item" style="padding-top: 8px;padding-bottom: 8px;color: rgb(40,40,40);font-family: Nunito, sans-serif;font-weight: bold;" onclick="localStorage.removeItem(&#39;userData&#39;)" href="../../index.html" rel="prev"><i class="fas fa-sign-out-alt fa-sm fa-fw me-2" style="color: rgb(40,40,81);"></i>&nbsp;Logout</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
                <div class="container-fluid paddingAll">
                    <div class="card shadow d-flex justify-content-start align-items-center justify-content-xxl-start" style="border-radius: 16px;">
                        <div class="d-flex flex-column justify-content-start app-container" style="width: 100%;margin: 0px;padding-right: 16px;padding-left: 16px;padding-top: 16px;">
                            <div class="alert alert-primary align-items-start alert-dismissible premium2" role="alert" id="alertpopupfoto" style="background: linear-gradient(15deg, #aa0000 12%, rgb(231,22,22) 49%, #ff5353 85%), #ff5f55;border-radius: 16px;width: 100%;"><button class="btn-close btn-close-white" type="button" aria-label="Close" data-bs-dismiss="alert"></button>
                                <div class="d-flex justify-content-between"><span class="text-light" aria-hidden="&quot;true&quot;>&amp;times;" style="font-size: 16px;font-family: Nunito, sans-serif;"><span style="font-weight: normal !important;">Akun anda&nbsp;</span><span class="status" aria-hidden="&quot;true&quot;>&amp;times;" style="color: rgb(250,255,0);"><span style="font-weight: normal !important;">Status</span></span><span style="font-weight: normal !important;">, anda tidak dapat menikmati fitur prenium&nbsp; . cek&nbsp;</span><a class="alert-link link-light" href="berlangganan.html"><span style="font-weight: normal !important;">disini</span></a></span></div>
                            </div>
                            <div class="alert alert-primary align-items-start alert-dismissible" role="alert" id="alert2" style="background: linear-gradient(15deg, #4a11a7 12%, rgb(99,84,186) 50%, rgb(57,11,175) 90%), #ff5f55;border-radius: 16px;"><button class="btn-close btn-close-white" type="button" aria-label="Close" data-bs-dismiss="alert"></button>
                                <div class="d-flex justify-content-between"><span class="text-light" aria-hidden="&quot;true&quot;>&amp;times;" style="font-size: 16px;">Setelah transaksi, di mohon untuk me-refresh halaman</span></div>
                            </div>
                            <div class="row d-flex d-xxl-flex align-items-start produk01" style="gap: 16px;">
                                <div class="col d-flex flex-column flex-sm-column flex-md-column flex-lg-column flex-xl-column flex-xxl-column" style="gap: 16px;margin-bottom: 30px;padding: 0px;">
                                    <div class="d-flex flex-column flex-sm-column summary-card total-balance paddingAll" style="gap: 16px;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-left-width: 5px;border-radius: 16px;margin-bottom: 0px;width: 100%;">
                                        <div class="d-flex justify-content-start align-items-center" style="gap: 16px;margin-right: 16px;margin-bottom: 16px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -32 576 576" width="1em" height="1em" fill="currentColor" style="height: auto;width: auto;font-size: 35px;color: rgb(67,97,238);">
                                                <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. -->
                                                <path d="M547.6 103.8L490.3 13.1C485.2 5 476.1 0 466.4 0H109.6C99.9 0 90.8 5 85.7 13.1L28.3 103.8c-29.6 46.8-3.4 111.9 51.9 119.4c4 .5 8.1 .8 12.1 .8c26.1 0 49.3-11.4 65.2-29c15.9 17.6 39.1 29 65.2 29c26.1 0 49.3-11.4 65.2-29c15.9 17.6 39.1 29 65.2 29c26.2 0 49.3-11.4 65.2-29c16 17.6 39.1 29 65.2 29c4.1 0 8.1-.3 12.1-.8c55.5-7.4 81.8-72.5 52.1-119.4zM499.7 254.9l-.1 0c-5.3 .7-10.7 1.1-16.2 1.1c-12.4 0-24.3-1.9-35.4-5.3V384H128V250.6c-11.2 3.5-23.2 5.4-35.6 5.4c-5.5 0-11-.4-16.3-1.1l-.1 0c-4.1-.6-8.1-1.3-12-2.3V384v64c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V384 252.6c-4 1-8 1.8-12.3 2.3z"></path>
                                            </svg>
                                            <h3 style="font-size: 20px;font-family: Nunito, sans-serif;color: #322f2f;font-weight: bold;margin-bottom: 0px;">Profile tokoku</h3>
                                        </div>
                                        <form id="formPengaturanToko" style="color: var(--text-color);font-family: Nunito, sans-serif;font-weight: bold;">
                                            <div class="row">
                                                <div class="col-md-6 mb-3"><label class="form-label">Nama Toko</label><input class="form-control form-control" type="text" id="namaToko" required="" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                                <div class="col-md-6 mb-3"><label class="form-label">Email Toko</label><input class="form-control form-control" type="email" id="emailToko" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 mb-3"><label class="form-label">Nomor WhatsApp</label><input class="form-control form-control" type="tel" id="nomorWAToko" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                                <div class="col-md-6 mb-3"><label class="form-label">NPWP</label><input class="form-control form-control" type="text" id="npwpToko" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                            </div>
                                            <div class="mb-3"><label class="form-label">Alamat Toko</label><textarea class="form-control form-control" id="alamatToko" rows="3" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></textarea></div>
                                            <div class="mb-3"><label class="form-label">Deskripsi Toko</label><textarea class="form-control form-control" id="deskripsiToko" rows="3" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></textarea></div>
                                        </form>
                                    </div>
                                    <div class="d-flex summary-card total-balance row paddingAll" style="box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-left-width: 5px;border-radius: 16px;margin-bottom: 0px;width: 100%;margin-left: 0px;margin-right: 0px;">
                                        <form id="formPengaturanStruk" style="color: var(--text-color);font-family: Nunito, sans-serif;font-weight: bold;">
                                            <div class="mb-3"><label class="form-label">Catatan Kaki Struk</label><textarea class="form-control form-control" id="catatanKakiStruk" placeholder="Contoh: Terima kasih, barang yang sudah dibeli tidak dapat dikembalikan" rows="3" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></textarea></div>
                                            <div class="row">
                                                <div class="col-md-6 mb-3"><label class="form-label">Metode Pembayaran</label>
                                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="metodeTunai"><label class="form-check-label" for="metodeTunai">Metode Tunai</label></div>
                                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="metodeTransfer"><label class="form-check-label" for="metodeTransfer">Transfer</label></div>
                                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="metodeQRIS"><label class="form-check-label" for="metodeQRIS">Qris</label></div>
                                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="metodeShopee"><label class="form-check-label" for="metodeShopee">Shopee</label></div>
                                                </div>
                                                <div class="col-md-6 mb-3"><label class="form-label">Logo Toko</label>
                                                    <div class="alert alert-primary align-items-start alert-dismissible premium2" role="alert" id="alertpopupfoto" style="background: linear-gradient(15deg, #aa0000 12%, rgb(231,22,22) 49%, #ff5353 85%), #ff5f55;border-radius: 16px;width: 100%;"><button class="btn-close btn-close-white" type="button" aria-label="Close" data-bs-dismiss="alert"></button>
                                                        <div class="d-flex justify-content-between"><span class="text-light" aria-hidden="&quot;true&quot;>&amp;times;" style="font-size: 16px;font-family: Nunito, sans-serif;"><span style="font-weight: normal !important;">Akun anda&nbsp;</span><span class="status" aria-hidden="&quot;true&quot;>&amp;times;" style="color: rgb(250,255,0);"><span style="font-weight: normal !important;">Status</span></span><span style="font-weight: normal !important;">, anda tidak dapat menikmati fitur prenium&nbsp; . cek&nbsp;</span><a class="alert-link link-light" href="berlangganan.html"><span style="font-weight: normal !important;">disini</span></a></span></div>
                                                    </div><input class="form-control form-control premium" type="file" id="logoToko" accept="image/*" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);margin-bottom: 12px;"><img id="previewLogo" class="preview-logo mt-2" style="border-radius: 16px;padding-top: 12px;padding-bottom: 12px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);max-width: 250px;width: 250px;height: 250px;">
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="col-xxl-4 d-flex flex-column" style="gap: 16px;margin-bottom: 30px;padding: 0px;">
                                    <div class="d-flex flex-column summary-card total-balance paddingAll" style="gap: 16px;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-left-width: 5px;border-radius: 16px;margin-bottom: 0px;width: 100%;">
                                        <form id="formKeamanan" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;">
                                            <div class="mb-3"><label class="form-label">Username Admin</label><input class="form-control form-control" type="text" id="usernameAdmin" required="" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Password</label><input class="form-control form-control" type="password" id="passwordAdmin" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Konfirmasi Password</label><input class="form-control form-control" type="password" id="konfirmasiPassword" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                            <div class="alert alert-info" role="alert"><i class="bi bi-info-circle"></i><span> Biarkan password kosong jika tidak ingin mengubah </span></div>
                                        </form>
                                    </div>
                                    <div class="d-flex summary-card total-balance row paddingAll" id="daftarProduk-1" style="box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-left-width: 5px;border-radius: 16px;margin-bottom: 0px;width: 100%;margin-left: 0px;margin-right: 0px;">
                                        <form id="formPajakDiskon" style="color: var(--text-color);font-family: Nunito, sans-serif;font-weight: bold;">
                                            <div class="mb-3"><label class="form-label">Pajak Penjualan (%)</label><input class="form-control form-control" type="number" id="persentasePajak" max="100" min="0" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Diskon Default (%)</label><input class="form-control form-control" type="number" id="persentaseDiskon" max="100" min="0" style="border-radius: 16px;width: 100%;padding-top: 6px;padding-bottom: 6px;padding-right: 12px;padding-left: 12px;border: 2px solid rgb(78,115,223);"></div>
                                            <div class="form-check"><input class="form-check-input" type="checkbox" id="aktifkanDiskon"><label class="form-check-label" for="aktifkanDiskon">Aktifkan Diskon</label></div>
                                        </form>
                                    </div>
                                    <div class="d-flex flex-column summary-card total-balance row paddingAll" id="daftarProduk-2" style="gap: 16px;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-left-width: 5px;border-radius: 16px;margin-bottom: 0px;width: 100%;margin-left: 0px;margin-right: 0px;"><button class="btn btn-primary d-flex d-xxl-flex justify-content-center align-items-center justify-content-xxl-start d-flex" id="btnSimpanPengaturan" style="border-radius: 16px;font-family: Nunito, sans-serif;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);width: auto;"><i class="fas fa-save" style="margin-right: 10px;"></i>Simpan Pengaturan</button>
                                        <ul class="list-group" style="padding-right: 0px;">
                                            <li class="list-group-item"><span>Simpan pengaturan toko terlebih dahulu&nbsp;<i class="fas fa-save"></i></span></li>
                                        </ul>
                                    </div>
                                </div><style>
        body {
            background-color: #f4f6f9;
        }
        .sidebar {
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
            padding-top: 2rem;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }
        @media print {
            body * {
                visibility: hidden;
            }
            #struk, #struk * {
                visibility: visible;
            }
            #struk {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
        }
        @media print {
    body * {
        visibility: hidden;
    }
    #strukPembayaran, #strukPembayaran * {
        visibility: visible;
    }
    #strukPembayaran {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        margin: 0;
        padding: 20px;
    }
}
    </style>
                            </div>
                        </div>
                        <div class="modal fade" role="dialog" tabindex="-1" id="profile-user">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header justify-content-between">
                                        <h4 class="modal-title" style="color: rgb(40,40,40);font-family: Nunito, sans-serif;font-weight: bold;font-size: 20px;"></h4><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" type="button" aria-label="Close" data-bs-dismiss="modal" style="font-size: 34px;color: rgb(78,115,223);box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-width: 2px;border-style: solid;border-radius: 16px;">
                                            <path d="M16.3394 9.32245C16.7434 8.94589 16.7657 8.31312 16.3891 7.90911C16.0126 7.50509 15.3798 7.48283 14.9758 7.85938L12.0497 10.5866L9.32245 7.66048C8.94589 7.25647 8.31312 7.23421 7.90911 7.61076C7.50509 7.98731 7.48283 8.62008 7.85938 9.0241L10.5866 11.9502L7.66048 14.6775C7.25647 15.054 7.23421 15.6868 7.61076 16.0908C7.98731 16.4948 8.62008 16.5171 9.0241 16.1405L11.9502 13.4133L14.6775 16.3394C15.054 16.7434 15.6868 16.7657 16.0908 16.3891C16.4948 16.0126 16.5171 15.3798 16.1405 14.9758L13.4133 12.0497L16.3394 9.32245Z" fill="currentColor"></path>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" fill="currentColor"></path>
                                        </svg>
                                    </div>
                                    <div class="modal-body">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Data profile</th>
                                                        <th style="color: rgb(255,255,255);">----------------------------</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Username</td>
                                                        <td class="username">user</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Email</td>
                                                        <td class="email">Email</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Status</td>
                                                        <td class="status">status</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="modal-footer"><button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" role="dialog" tabindex="-1" id="modalTambahProduk">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header justify-content-between">
                                        <h4 class="modal-title" style="color: rgb(40,40,40);font-family: Nunito, sans-serif;font-weight: bold;font-size: 20px;">Tambah Produk Baru</h4><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" type="button" aria-label="Close" data-bs-dismiss="modal" style="font-size: 34px;color: rgb(78,115,223);box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-width: 2px;border-style: solid;border-radius: 16px;">
                                            <path d="M16.3394 9.32245C16.7434 8.94589 16.7657 8.31312 16.3891 7.90911C16.0126 7.50509 15.3798 7.48283 14.9758 7.85938L12.0497 10.5866L9.32245 7.66048C8.94589 7.25647 8.31312 7.23421 7.90911 7.61076C7.50509 7.98731 7.48283 8.62008 7.85938 9.0241L10.5866 11.9502L7.66048 14.6775C7.25647 15.054 7.23421 15.6868 7.61076 16.0908C7.98731 16.4948 8.62008 16.5171 9.0241 16.1405L11.9502 13.4133L14.6775 16.3394C15.054 16.7434 15.6868 16.7657 16.0908 16.3891C16.4948 16.0126 16.5171 15.3798 16.1405 14.9758L13.4133 12.0497L16.3394 9.32245Z" fill="currentColor"></path>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" fill="currentColor"></path>
                                        </svg>
                                    </div>
                                    <div class="modal-body">
                                        <div class="alert alert-primary align-items-start alert-dismissible" role="alert" id="alert3" style="background: linear-gradient(15deg, #4a11a7 12%, rgb(99,84,186) 50%, rgb(57,11,175) 90%), #ff5f55;border-radius: 16px;width: 100%;"><button class="btn-close btn-close-white" type="button" aria-label="Close" data-bs-dismiss="alert3"></button>
                                            <div class="d-flex justify-content-between"><span class="text-light" aria-hidden="&quot;true&quot;>&amp;times;" style="font-size: 16px;">Tidak di rekomendasikan menambah produk melalui tambah produk cepat. jika tersimpan. lakukan perubahan data di halaman berikut dengan klik&nbsp;<a class="alert-link" href="item.html"><span style="font-weight: normal !important; color: rgb(249, 226, 20);">disini</span></a></span></div>
                                        </div>
                                        <form id="formTambahProdukCepat">
                                            <div class="mb-3"><label class="form-label">Nama Produk</label><input class="form-control form-control" type="text" id="namaProdukBaru" required="" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Harga Jual</label><input class="form-control form-control" type="number" id="hargaProdukBaru" required="" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Stok</label><input class="form-control form-control" type="number" id="stokProdukBaru" required="" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);"></div>
                                        </form>
                                    </div>
                                    <div class="modal-footer"><button class="btn btn-primary text-start d-flex d-xxl-flex justify-content-center align-items-center d-flex" style="border-radius: 16px;font-family: Nunito, sans-serif;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);width: auto;" type="submit" form="formTambahProdukCepat"><i class="fas fa-save" style="margin-right: 10px;"></i> Simpan</button></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" role="dialog" tabindex="-1" id="modalPembayaran">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header justify-content-between">
                                        <h4 class="modal-title" style="color: rgb(40,40,40);font-family: Nunito, sans-serif;font-weight: bold;font-size: 20px;">Proses pembayaran</h4><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" type="button" aria-label="Close" data-bs-dismiss="modal" style="font-size: 34px;color: rgb(78,115,223);box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-width: 2px;border-style: solid;border-radius: 16px;">
                                            <path d="M16.3394 9.32245C16.7434 8.94589 16.7657 8.31312 16.3891 7.90911C16.0126 7.50509 15.3798 7.48283 14.9758 7.85938L12.0497 10.5866L9.32245 7.66048C8.94589 7.25647 8.31312 7.23421 7.90911 7.61076C7.50509 7.98731 7.48283 8.62008 7.85938 9.0241L10.5866 11.9502L7.66048 14.6775C7.25647 15.054 7.23421 15.6868 7.61076 16.0908C7.98731 16.4948 8.62008 16.5171 9.0241 16.1405L11.9502 13.4133L14.6775 16.3394C15.054 16.7434 15.6868 16.7657 16.0908 16.3891C16.4948 16.0126 16.5171 15.3798 16.1405 14.9758L13.4133 12.0497L16.3394 9.32245Z" fill="currentColor"></path>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" fill="currentColor"></path>
                                        </svg>
                                    </div>
                                    <div class="modal-body">
                                        <form id="formPembayaran">
                                            <div class="mb-3"><label class="form-label">Nama Pelanggan</label><input class="form-control form-control" type="text" id="namaPelanggan" required="" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Total Pembayaran</label><input class="form-control form-control" type="text" id="totalPembayaran" readonly="" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Metode Pembayaran</label><select class="form-select form-select" id="metodePembayaran" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);">
                                                    <option value="tunai">Tunai</option>
                                                    <option value="transfer">Transfer</option>
                                                    <option value="qris">QRIS</option>
                                                </select></div>
                                            <div class="mb-3"><label class="form-label">Uang Diterima</label><input class="form-control form-control" type="number" id="uangDiterima" required="" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);"></div>
                                            <div class="mb-3"><label class="form-label">Kembalian</label><input class="form-control form-control" type="text" id="kembalian" readonly="" style="border-radius: 16px;width: 100%;border-color: rgb(78,115,223);"></div>
                                        </form>
                                    </div>
                                    <div class="modal-footer"><button class="btn btn-primary text-start d-flex d-xxl-flex justify-content-center align-items-center d-flex" style="border-radius: 16px;font-family: Nunito, sans-serif;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);width: auto;" type="submit" form="formPembayaran"><i class="fas fa-save" style="margin-right: 10px;"></i> Selesaikan Transaksi</button></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" role="dialog" tabindex="-1" id="modalStruk">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header justify-content-between">
                                        <h4 class="modal-title" style="color: rgb(40,40,40);font-family: Nunito, sans-serif;font-weight: bold;font-size: 20px;">Struk pembelian</h4><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" type="button" aria-label="Close" data-bs-dismiss="modal" style="font-size: 34px;color: rgb(78,115,223);box-shadow: 0px 6px 14px rgba(67,97,238,0.56);border-width: 2px;border-style: solid;border-radius: 16px;">
                                            <path d="M16.3394 9.32245C16.7434 8.94589 16.7657 8.31312 16.3891 7.90911C16.0126 7.50509 15.3798 7.48283 14.9758 7.85938L12.0497 10.5866L9.32245 7.66048C8.94589 7.25647 8.31312 7.23421 7.90911 7.61076C7.50509 7.98731 7.48283 8.62008 7.85938 9.0241L10.5866 11.9502L7.66048 14.6775C7.25647 15.054 7.23421 15.6868 7.61076 16.0908C7.98731 16.4948 8.62008 16.5171 9.0241 16.1405L11.9502 13.4133L14.6775 16.3394C15.054 16.7434 15.6868 16.7657 16.0908 16.3891C16.4948 16.0126 16.5171 15.3798 16.1405 14.9758L13.4133 12.0497L16.3394 9.32245Z" fill="currentColor"></path>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z" fill="currentColor"></path>
                                        </svg>
                                    </div>
                                    <div class="modal-body" id="strukPembayaran"></div>
                                    <div class="modal-footer"><button class="btn btn-primary text-start d-flex d-xxl-flex justify-content-center align-items-center d-flex" style="border-radius: 16px;font-family: Nunito, sans-serif;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);width: auto;" type="button" onclick="window.print()"><i class="fas fa-print" style="margin-right: 10px;"></i> Cetak Nota</button><button class="btn btn-primary text-start d-flex d-xxl-flex justify-content-center align-items-center d-flex" id="btnCetakNota" style="border-radius: 16px;font-family: Nunito, sans-serif;box-shadow: 0px 6px 14px rgba(67,97,238,0.56);width: auto;" type="button" onclick="window.print()"><i class="fas fa-print" style="margin-right: 10px;"></i> Cetak Nota Penuh</button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="bg-white sticky-footer" style="margin-top: 33px;border-top: 8px solid rgb(78,115,223);width: 100%;">
                <div class="container">
                    <div class="row d-xxl-flex justify-content-xxl-center">
                        <div class="col-md-3 col-lg-3 col-xxl-2 d-flex d-xxl-flex flex-column align-items-start" style="padding: 16px;">
                            <div class="fw-bold d-flex align-items-center" style="margin-bottom: 16px;"><img src="../../assets/img/SEO/icon-wallet.webp" style="width: 35px;margin-bottom: 0px;border-radius: 10px;margin-right: 10px;"><span style="font-family: Nunito, sans-serif;font-weight: bold;">WalletKu.biz.id</span></div>
                            <p class="copyright" style="font-family: Nunito, sans-serif;font-size: 16px;color: var(--text-color);line-height: 22px;">Ahli dalam mengatur keuangan dan tokomu.</p>
                        </div>
                        <div class="col-md-3" style="padding: 16px;">
                            <ul class="list-group">
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 5px;padding-bottom: 5px;font-size: 16px;background: var(--primary-color);color: var(--card-color);border-radius: 6.6px 5.6px 0px -2px;border-bottom-right-radius: 16px;border-bottom-left-radius: 16px;border-top-right-radius: 16px;border-top-left-radius: 16px;margin-bottom: 16px;"><span style="font-family: Nunito, sans-serif;font-weight: bold;color: var(--card-color);font-size: 16px;">Layanan</span></li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;"><a href="https://walletku.biz.id" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;">Halaman utama<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                            <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                        </svg></a></li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;"><a href="https://walletku.biz.id/login" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;">Login<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                            <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                        </svg></a></li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;"><a href="https://walletku.biz.id/register" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;">Register<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                            <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                        </svg></a></li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;"><a href="https://walletku.biz.id/reset" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;">Reset password<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                            <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                        </svg></a></li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;"><a href="https://walletku.biz.id/#harga" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;">Harga<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                            <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                        </svg></a></li>
                            </ul>
                        </div>
                        <div class="col-md-3 col-lg-3" style="padding: 16px;">
                            <ul class="list-group">
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 5px;padding-bottom: 5px;font-size: 16px;background: var(--primary-color);color: var(--card-color);border-radius: 6.6px 5.6px 0px -2px;border-bottom-right-radius: 16px;border-bottom-left-radius: 16px;border-top-right-radius: 16px;border-top-left-radius: 16px;margin-bottom: 16px;"><span style="font-family: Nunito, sans-serif;font-weight: bold;color: var(--card-color);font-size: 16px;">Sponsore Utama</span></li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;"><a href="https://walletku.biz.id/#sponsor" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;" rel="prev">Sponsor<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                            <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                        </svg></a></li>
                            </ul>
                        </div>
                        <div class="col-md-3" style="padding: 16px;">
                            <ul class="list-group">
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 5px;padding-bottom: 5px;font-size: 16px;background: var(--primary-color);color: var(--card-color);border-radius: 6.6px 5.6px 0px -2px;border-bottom-right-radius: 16px;border-bottom-left-radius: 16px;border-top-right-radius: 16px;border-top-left-radius: 16px;margin-bottom: 16px;"><span style="font-family: Nunito, sans-serif;font-weight: bold;color: var(--card-color);font-size: 16px;">Founder</span></li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;">
                                    <div style="margin-bottom: 10px;"><img style="height: 70px;width: 70px;margin-right: 16px;border-radius: 16px;" src="../../assets/img/bima.webp"><a href="https://www.threads.net/@bimboy.zxz?__pwa=1" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;" target="_blank">Bimboy.zxz<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                                <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                            </svg></a></div>
                                    <p class="text-muted" style="font-family: Nunito, sans-serif;margin-bottom: 16px;font-size: 14px;">Web developer</p>
                                </li>
                                <li class="list-group-item" style="border-width: 0px;border-style: none;padding-top: 0px;padding-bottom: 5px;font-size: 16px;">
                                    <div style="margin-bottom: 10px;"><img style="height: 70px;width: 70px;margin-right: 16px;border-radius: 16px;" src="../../assets/img/gyku.webp"><a href="https://www.threads.net/@gyku__" style="color: var(--text-color);font-weight: bold;font-family: Nunito, sans-serif;" target="_blank">Gyku__<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-arrow-up-right-circle-fill" style="margin-left: 6px;">
                                                <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"></path>
                                            </svg></a></div>
                                    <p class="text-muted" style="font-family: Nunito, sans-serif;margin-bottom: 16px;font-size: 14px;">Support</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between align-items-center pt-3">
                        <p class="mb-0" style="font-family: Nunito, sans-serif;color: var(--text-color);font-weight: bold;">Copyright © 2025 WalletKu.biz.id</p>
                    </div>
                </div>
            </footer>
        </div>
    </div><style>
    /* Styling tambahan untuk elemen yang disable */
    .disabled-element {
      opacity: 0.6;
      pointer-events: none;
    }
    /* Styling untuk elemen premium2 */
    .premium2 {
      display: none;
    }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      const userData = JSON.parse(localStorage.getItem("userData"));
      if(!userData){
        window.location.href = "../../login.html";
        return;
      }
      
      // Tampilkan data pengguna
      document.querySelectorAll(".username").forEach(el => el.textContent = userData.nama);
      document.querySelectorAll(".email").forEach(el => el.textContent = userData.email);
      
      // Fungsi validasi premium berdasarkan tanggal
      function isPremiumActive() {
        if(userData.role === "premium"){
          // Pastikan format tanggal yang dikirim adalah YYYY-MM-DD atau ISO string
          const expiryDate = new Date(userData.date);
          const today = new Date(new Date().toDateString());
          return expiryDate >= today;
        }
        return false;
      }
      
      // Validasi status premium
      const premiumActive = isPremiumActive();
      document.querySelectorAll(".status").forEach(el => {
        // Jika role premium tetapi sudah expired, tampilkan sebagai "standart"
        el.textContent = (userData.role === "premium" && premiumActive) ? "premium" : "standart";
      });
      
      // Fungsi untuk menangani tampilan elemen premium
      function handlePremiumElements() {
        const isPremium = (userData.role === "premium" && premiumActive);
        
        // Tangani elemen dengan class premium
        document.querySelectorAll(".premium").forEach(el => {
          if(!isPremium){
            el.disabled = true;
            el.classList.add("disabled-element");
          } else {
            el.disabled = false;
            el.classList.remove("disabled-element");
          }
        });
        
        // Tangani elemen dengan class premium2 (tampilkan hanya untuk standar)
        document.querySelectorAll(".premium2").forEach(el => {
          if(isPremium){
            el.style.display = "none";
          } else {
            el.style.display = "block";
          }
        });
      }
      
      // Panggil fungsi untuk menangani elemen premium
      handlePremiumElements();
      
      // Jika status di Apps Script masih premium tetapi tanggal sudah lewat,
      // tampilkan modal notifikasi agar pengguna mengetahui bahwa masa akses premium telah berakhir.
      if(userData.role === "premium" && !premiumActive){
        $('#premiumExpiredModal').modal('show');
      }
    });
  </script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../assets/js/bs-init.js"></script>
    <script src="../../assets/js/Tokoku-js/toko.js"></script>
</body>

</html>